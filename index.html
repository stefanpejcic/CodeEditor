<!DOCTYPE html>
<html lang="en-US">
    <head>
        <title>Code Editor</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="Code Editor for HTML, CSS and JS">
        <meta name="keywords" content="code editor, html editor"/>
        <meta name="author" content="Stefan Pejcic">
        <meta name="robots" content="index,follow">
    </head>


    <body>
    
    	<nav class="navbar navbar-light navbar-expand-md bg-light justify-content-center">
		    <a href="/" class="navbar-brand mr-0">CodePlayer</a> 
		    <button class="navbar-toggler ml-1" type="button" data-toggle="collapse" data-target="#collapsingNavbar2">
		        <span class="navbar-toggler-icon"></span>
		    </button>
		    <div class="navbar-collapse collapse justify-content-between align-items-center w-100" id="collapsingNavbar2">
		        <ul class="navbar-nav mx-auto text-center" id="nav_">
		            <li class="nav-item toggle selected">HTML</li>
		            <li class="nav-item toggle">CSS</li>
		            <li class="nav-item toggle">JS</li>
		            <li class="nav-item toggle selected">RESULT</li>
		        </ul>
		        <button class="btn btn-outline-primary" id="runButton">RUN</button>
		    </div>
		</nav>

		<div class="clear"></div>

		<div class="codeContainer" id="HTMLContainer">
			<div class="codeLabel">HTML</div>
			<textarea id="htmlCode"></textarea>
		</div>

		<div class="codeContainer" id="CSSContainer">
			<div class="codeLabel">CSS</div>
			<textarea id="cssCode"></textarea>
		</div>

		<div class="codeContainer" id="JSContainer">
			<div class="codeLabel">JS</div>
			<textarea id="jsCode"></textarea>
		</div>

		<div class="codeContainer" id="ResultContainer">
			<div class="codeLabel">RESULT</div>
			<iframe id="resultFrame"></iframe>
		</div>



        <script type="text/javascript">

        	var windowHeight = $(window).height();
        	var navBarHeigth = $("nav").height();
        	var codeContainerHeight = windowHeight - navBarHeigth;

        	$(".codeContainer").height(codeContainerHeight+"px");

        	$(".toggle").click(function() {

        		$(this).toggleClass("selected");

        		var activeDiv = $(this).html();

        		$("#"+activeDiv+"Container").toggle();

        		var showingDiv = $(".codeContainer").filter(function(){

        			return($(this).css("display") != "none");

        		}).length;

        		var width = 100/showingDiv;


        		$(".codeContainer").css("width", width+"%");

        	});

        	$("#runButton").click(function() {

        		$("iframe").contents().find("html").html('<style>'+$("#cssCode").val()+'</style>'+$("#htmlCode").val());

        	});

        	document.getElementById("resultFrame").contentWindow.eval($("#jsCode").val());


        </script>
    </body>
</html>
